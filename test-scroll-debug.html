<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Debug Scroll Sidebar</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            height: 100vh;
            overflow: hidden;
        }
        
        .debug-info {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.8);
            padding: 10px;
            border-radius: 5px;
            font-size: 12px;
            z-index: 1000;
        }
        
        /* Estructura igual que la aplicación */
        .sidebar {
            width: 100vw;
            max-width: 320px;
            height: 100vh;
            background: rgba(0,0,0,0.2);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            padding: 20px;
        }
        
        .sidebar-header-fixed {
            flex: 0 0 auto;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }
        
        .sidebar-nav {
            flex: 1 1 0%;
            min-height: 0;
            overflow-y: auto;
            overflow-x: hidden;
            padding-right: 8px;
            margin-right: -8px;
            border: 2px solid red; /* Debug */
        }
        
        .sidebar-footer-fixed {
            flex: 0 0 auto;
            padding-top: 1rem;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            margin-top: auto;
        }
        
        .menu-item-mobile {
            min-height: 52px;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            margin-bottom: 4px;
            padding: 12px 16px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .menu-item-mobile:hover {
            background: rgba(255,255,255,0.2);
        }
        
        /* Custom scrollbar mejorado */
        .sidebar-nav::-webkit-scrollbar {
            width: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
        }
        
        .sidebar-nav::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.6);
            border-radius: 5px;
            border: 2px solid transparent;
            background-clip: content-box;
        }
        
        .sidebar-nav::-webkit-scrollbar-thumb:active {
            background: rgba(255, 255, 255, 0.8);
        }
        
        /* Para Firefox */
        .sidebar-nav {
            scrollbar-width: thick;
            scrollbar-color: rgba(255, 255, 255, 0.6) rgba(255, 255, 255, 0.1);
        }
        
        @media (max-width: 1024px) {
            .sidebar-nav {
                height: calc(100vh - 350px);
                max-height: 70vh;
                min-height: 250px;
                overflow-y: scroll;
            }
        }
        
        @media (max-height: 600px) {
            .sidebar-nav {
                height: calc(100vh - 250px);
                min-height: 200px;
                max-height: 60vh;
            }
        }
    </style>
</head>
<body>
    <div class="debug-info" id="debug">
        Cargando debug info...
    </div>
    
    <div class="sidebar">
        <div class="sidebar-header-fixed">
            <h2>🏥 Clínica Delux</h2>
            <p>Test Scroll Sidebar</p>
            <div style="margin-top: 10px; font-size: 12px;">
                <div>📱 Pantalla: <span id="screen-size"></span></div>
                <div>🔄 Estado: <span id="scroll-status"></span></div>
            </div>
        </div>
        
        <div class="sidebar-nav" id="nav-container">
            <nav>
                <div class="menu-item-mobile">🏠 Dashboard</div>
                <div class="menu-item-mobile">👨‍⚕️ Portal Profesional</div>
                <div class="menu-item-mobile">📅 Gestión de Citas</div>
                <div class="menu-item-mobile">📆 Calendario</div>
                <div class="menu-item-mobile">👥 Profesionales</div>
                <div class="menu-item-mobile">💼 Disciplinas</div>
                <div class="menu-item-mobile">👤 Usuarios</div>
                <div class="menu-item-mobile">🛡️ Roles</div>
                <div class="menu-item-mobile">👥 Pacientes</div>
                <div class="menu-item-mobile">💰 Ingresos/Egresos</div>
                <div class="menu-item-mobile">📧 Notificaciones</div>
                <div class="menu-item-mobile">📊 Reportes</div>
                <div class="menu-item-mobile">🐛 Logs de API</div>
                <div class="menu-item-mobile">⚙️ Configuración</div>
                <div class="menu-item-mobile">📱 Extra 1</div>
                <div class="menu-item-mobile">📱 Extra 2</div>
                <div class="menu-item-mobile">📱 Extra 3</div>
                <div class="menu-item-mobile">📱 Extra 4</div>
                <div class="menu-item-mobile">📱 Extra 5</div>
                <div class="menu-item-mobile">📱 Extra 6</div>
                <div class="menu-item-mobile">📱 Extra 7 (Final)</div>
            </nav>
        </div>
        
        <div class="sidebar-footer-fixed">
            <div class="menu-item-mobile" style="background: rgba(255,0,0,0.3);">
                🚪 Cerrar Sesión
            </div>
        </div>
    </div>
    
    <script>
        function updateDebug() {
            const nav = document.getElementById('nav-container');
            const debug = document.getElementById('debug');
            const screenSize = document.getElementById('screen-size');
            const scrollStatus = document.getElementById('scroll-status');
            
            screenSize.textContent = `${window.innerWidth}x${window.innerHeight}`;
            
            const needsScroll = nav.scrollHeight > nav.clientHeight;
            const canScroll = nav.scrollTop !== nav.scrollHeight - nav.clientHeight;
            
            scrollStatus.textContent = needsScroll ? 
                (canScroll ? '✅ Scroll Funcional' : '⚠️ En el fondo') : 
                '❌ No necesita scroll';
            
            debug.innerHTML = `
                <div>📐 Container: ${nav.clientHeight}px</div>
                <div>📏 Content: ${nav.scrollHeight}px</div>
                <div>🔄 Scroll: ${Math.round(nav.scrollTop)}px</div>
                <div>📱 Screen: ${window.innerWidth}x${window.innerHeight}</div>
                <div>✅ Status: ${needsScroll ? 'SCROLL OK' : 'NO SCROLL'}</div>
            `;
        }
        
        // Actualizar cada segundo
        setInterval(updateDebug, 1000);
        updateDebug();
        
        // Evento de scroll
        document.getElementById('nav-container').addEventListener('scroll', updateDebug);
        window.addEventListener('resize', updateDebug);
        
        console.log('🧪 Debug scroll cargado');
        console.log('📱 Para probar: redimensiona la pantalla y intenta hacer scroll');
    </script>
</body>
</html>
